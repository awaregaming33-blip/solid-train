const assignments=[{id:'a1',course:'Math 101',title:'Homework 3',startDate:'2026-02-02',dueDate:'2026-02-10',isCompleted:false,canvasUrl:'https://canvas.instructure.com'},{id:'a2',course:'Math 101',title:'Quiz Prep Set',startDate:'2026-02-01',dueDate:'2026-02-12',isCompleted:true,canvasUrl:'https://canvas.instructure.com'},{id:'a3',course:'History 205',title:'Primary Source Notes',startDate:'2026-02-05',dueDate:'2026-02-09',isCompleted:false,canvasUrl:'https://canvas.instructure.com'},{id:'a4',course:'History 205',title:'Discussion Post',startDate:'2026-02-03',dueDate:'2026-02-08',isCompleted:true,canvasUrl:'https://canvas.instructure.com'},{id:'a5',course:'CS 220',title:'Lab 2: Sorting',startDate:'2026-02-06',dueDate:'2026-02-11',isCompleted:false,canvasUrl:'https://canvas.instructure.com'},{id:'a6',course:'CS 220',title:'Read Chapter 4',startDate:'2026-02-04',dueDate:'2026-02-13',isCompleted:false,canvasUrl:'https://canvas.instructure.com'},{id:'a7',course:'Biology 110',title:'Lab Reflection',startDate:'2026-02-02',dueDate:'2026-02-15',isCompleted:false,canvasUrl:'https://canvas.instructure.com'},{id:'a8',course:'Biology 110',title:'Flashcards: Cell Cycle',startDate:'2026-01-31',dueDate:'2026-02-07',isCompleted:true,canvasUrl:'https://canvas.instructure.com'},{id:'a9',course:'CS 220',title:'Project Proposal',startDate:'2026-02-07',dueDate:'',isCompleted:false,canvasUrl:'https://canvas.instructure.com'},{id:'a10',course:'Math 101',title:'Review Session RSVP',startDate:'',dueDate:'',isCompleted:false,canvasUrl:'https://canvas.instructure.com'}];
const listEl=document.getElementById('assignmentList');const progressTextEl=document.getElementById('progressText');const progressFillEl=document.getElementById('progressFill');const progressTrackEl=document.querySelector('.track');
const parseDate=(v)=>{if(!v)return null;const t=new Date(v).getTime();return Number.isNaN(t)?null:t};
function sortAssignments(items){return [...items].sort((a,b)=>{if(a.isCompleted!==b.isCompleted)return a.isCompleted?1:-1;const aDue=parseDate(a.dueDate),bDue=parseDate(b.dueDate);if(aDue===null&&bDue!==null)return 1;if(aDue!==null&&bDue===null)return-1;if(aDue!==bDue)return(aDue??Number.MAX_SAFE_INTEGER)-(bDue??Number.MAX_SAFE_INTEGER);const aStart=parseDate(a.startDate)??Number.MAX_SAFE_INTEGER,bStart=parseDate(b.startDate)??Number.MAX_SAFE_INTEGER;return aStart-bStart})}
const completionPercentage=(items)=>items.length?Math.round((items.filter((i)=>i.isCompleted).length/items.length)*100):0;
function render(){const sorted=sortAssignments(assignments);const pct=completionPercentage(assignments);progressTextEl.textContent=`${pct}% Complete`;progressFillEl.style.width=`${pct}%`;progressTrackEl.setAttribute('aria-valuenow',String(pct));listEl.innerHTML='';sorted.forEach((a)=>{const li=document.createElement('li');li.className=`item${a.isCompleted?' completed':''}`;li.addEventListener('click',()=>window.open(a.canvasUrl,'_blank','noopener'));li.innerHTML=`<div class="course">${a.course}</div><div class="title">${a.title}</div><div class="meta">Due: ${a.dueDate||'Date unavailable'}</div><div class="actions"></div>`;const btn=document.createElement('button');btn.className=`toggle${a.isCompleted?' done':''}`;btn.textContent=a.isCompleted?'âœ“ Completed':'Mark complete';btn.addEventListener('click',(e)=>{e.stopPropagation();a.isCompleted=!a.isCompleted;render()});li.querySelector('.actions').appendChild(btn);listEl.appendChild(li)})}
render();
